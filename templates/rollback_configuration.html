{% extends "base.html" %} 
{% block content %}
<div class="container mt-4">
    <div class="max-w-lg mx-auto rounded-lg overflow-hidden shadow-md">
      <div class="py-4 col-sm-8 mx-auto bg-white p-5 col-12 px-6">
    <h1 class="mb-4">Select Version to Rollback to for {{ device.ip }}- {{device.username|upper}}</h1>
{% if versions %}
<form id="rollbackForm" method="post" class="mt-3">
    {% csrf_token %}
    <div class="input-group mb-3 d-grid">
        <select name="config_pk" class="form-select">
            {% for version in versions %}
            <option value="{{ version.pk }}">Rollback to {{ version.version_tag }} ({{ version.timestamp }})</option>
            {% endfor %}
        </select>
        <button type="button" class="btn btn-primary ml-3" onclick="confirmRollback()">Rollback</button>
    </div>
</form>
{% else %}
<p>No configurations versions found!</p>
{% endif %}
</div>
</div>
</div>

<script>
    function confirmRollback() {
        if (confirm("Are you sure you want to rollback to this version?")) {
            document.getElementById('rollbackForm').submit();
        }
    }
</script>
{% endblock %}
